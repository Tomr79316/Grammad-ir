<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
  <title>An Gramad&oacute;ir : Contributing</title>
  <meta http-equiv="Content-Language" content="en">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="description" content="An Gramad&oacute;ir contributing page">
  <meta name="keywords" content="grammar checking, Gaeilge, Irish language">
  <meta name="author" content="Kevin P. Scannell">
  <link rel="stylesheet" href="../kps.css" type="text/css">
</head>

<body>
<div class="content">
<h1>An Gramad&oacute;ir:<br>
How to Contribute</h1>

<hr>
<h2>Grammar checking other languages</h2>
See the <a href="iompar.html">Languages</a> page for more information.
<br><br>

<h2>Translating the user interface</h2>
Coming soon!  
See our page at the 
<a href="http://www.iro.umontreal.ca/contrib/po/HTML/">GNU Translation Project</a> 
for more information.
<br><br>

<hr>
<h2>Contributing words</h2>
The database of Irish words used by <i>An Gramad&oacute;ir</i>
is the same one used by my other Irish language applications:
the 
<a href="/ispell/index.html">GaelSpell</a> spellchecker
and <a href="/teasaras/index.html">An Teas&aacute;ras Leictreonach</a>.
Thus, if you take the time to contribute new words to any one of 
these packages, your contributions will be reflected in future 
releases of all of them.  Also, my software adds all inflections
and mutations of a given word to the database, so you don't have 
to worry about <i lang="ga">nGaeltacht, Ghaeltacht, Gaeltachta</i>,
etc. once the headword <i lang="ga">Gaeltacht</i> has been entered.

<hr>
<h2>Hacking the rule set</h2>
<p>
The easiest and most valuable way to contribute is by
helping add new rules to the checker.   Rules are contained in
three plain text files called <i>aonchiall-ga.in</i>, 
<i>eisceacht-ga.in</i> and <i>rialacha-ga.in</i>.
Complicated "meta"-scripts convert these (somewhat) human-readable
files into the Perl scripts which actually find and mark up the grammatical
errors.   
You fortunately don't need to understand this process to contribute rules
(although anyone who is curious can read the  
<a href="sonrai.html">Details</a> page).
</p>

<p>
The file <i>aonchiall-ga.in</i> contains rules for disambiguating 
parts of speech; for instance, the word <i>an</i> in Irish can either be
the definite article or an interrogative particle.   The first
couple of lines of <i>aonchiall-ga.in</i> are rules which indicate
that if <i>an</i> is followed by a verb, we expect it to be
an interrogative and otherwise it is the article. 
This kind of disambiguation is obviously a necessary preliminary step 
before one
can try to apply grammatical rules depending on part of speech.
</p>

<p>
The file <i>rialacha-ga.in</i> contains the grammatical rules proper,
and <i>eisceacht-ga.in</i> lists any exceptions to these rules.
The sections which follow describe the structure of all three files
in sufficient detail that (I hope) you will be able to write
and contribute your own rules for inclusion in later releases.
Alternatively, if you provide me with a brief description 
(in plain English or Irish) of
a rule you think is missing from the database, I will try and
construct the appropriate entry.
</p>

<hr>
<h2>Common structure of the *.in files</h2>
<p>
The structure of all three input files is essentially the same.
I've included a <i>flex/bison</i> parser in the distribution 
that can be used for error-checking these files during development
(see the "poncin" target in the Makefile).   Also, those who might prefer
a formal (BNF-like) grammar can look at the files <i>ponc.in.l</i>
and <i>ponc.in.y</i>.
</p>

<p>Lines beginning with a '#' or lines containing only whitespace are ignored.
All other lines contain "rules", which are structured as follows:</p>

<pre>
phrase:action
</pre>

<p>
A phrase is a simplified description of the regular expression you want 
to match in the marked up text stream.   The phrase syntax is the same for all
three files: a sequence of words separated by single spaces.
A word can either be an explicit regular expression
(e.g. "[Aa]ch" to match upper or lowercase "ach") or one
of a collection of macros defined in the file <i>gin.meta.sed</i>
(e.g. "LENITEDDFST" expands to the regular expression
"[DdFfSsTt]h[^&lt;]*").  In addition, a word can be provided with
a grammatical tag when there is a danger of ambiguity.
For instance
"&lt;T&gt;[Aa]n&lt;/T&gt;"
refers specifically to the word "an" as the definite article and 
not, say, as an interrogative particle.  It is a good idea to
include these tags even for unambiguous words, in case the database
changes in the future (it is also marginally faster this way).
The tag syntax
"&lt;^S&gt;do&lt;/^S&gt;"
is permitted as well; this will match instances of the word "do"
which are <em>not</em> prepositions.
</p>

<p>
Because the syntax of the "action" differs among the three
files, we will discuss them one by one.   In the sections below
you will also find advice for what kinds of rules you might like
to include, ways of optimizing your rule set, etc.
</p>

<h2>Disambiguation: <i>aonchiall-ga.in</i></h2>
The phrase portion of a rule in <i>aonchiall-ga.in</i>
is required to contain a single word marked up with
"&lt;B&gt;&lt;/B&gt;".  Naturally, this is the word to disambiguate
and the phrase is the context in which the disambiguation is to occur.
The "action" portion contains a single (opening) part of speech tag
like 
"&lt;N&gt;"
which represents the disambiguated part of speech when the given
phrase is matched.

<h2>Grammar checking: <i>rialacha-ga.in</i></h2>
<p>
The phrase portion of a rule in <i>rialacha-ga.in</i>
is converted to a regular expression which matches a grammatical error.
The action portion consists simply of a macro which expands
to the error message you want to be printed when the rule
applies.   As they belong to the user interface, these macros
are defined in <i>gr.in</i>.  The most common one is
"SEIMHIU" which expands to 
"S&eacute;imhi&uacute; ar iarraidh" ("Missing aspiration/lenition").
Certain macros can also take an parameter inside curly braces: 
the action "BACHOIR{ina}"
expands to "Ba chóir duit /ina/ a úsáid anseo"
("You ought to use /ina/ here") with the parameter inserted between the 
slashes.
</p>

<h2>Exceptions: <i>eisceacht-ga.in</i></h2>
<p>
The phrases in <i>eisceacht-ga.in</i> represent patterns which are
matched as errors by <i>rialacha-ga.in</i> but which are actually 
grammatical and should not be reported as errors.
For instance, the preposition <i lang="ga">faoi</i> causes
aspiration in general, but not in the phrase <i lang="ga">faoi deara</i>;
this phrase is therefore included in <i>eisceacht-ga.in</i>.
The action portion of a rule is left blank (though, to keep
the grammars the same, each line should be terminated by a colon).
</p>

<hr>
<h2>Contributors</h2>
<ul>
<li>Martin Gregory (German translation)
</ul>

<hr>
<em>© Cóipcheart/Copyright 2003 Kevin P. Scannell</em><br><br>
</ul>
</div>
<div class="navigation">
<a href = "index.html">Home</a><br>
<a href = "sios.html">Download</a><br>
<a href = "sonrai.html">Details</a><br>
Contributing<br>
<a href = "iompar.html">Languages</a><br>
<a href = "sampla.html">Sampler</a><br>
<a href = "foirm.html">Web Interface</a><br>
<a href = "/gaeilge.html">Projects</a><br>
<p class="centered">
<img src="gram.jpg" alt="dictionary excerpt" height="160" width="125">
</p>
</div>
</body>
</html>
