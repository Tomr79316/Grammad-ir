<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
  <title>An Gramad&oacute;ir : Contributing</title>
  <meta http-equiv="Content-Language" content="en">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="description" content="An Gramad&oacute;ir contributing page">
  <meta name="keywords" content="grammar checking, Gaeilge, Irish language">
  <meta name="author" content="Kevin P. Scannell">
  <link rel="stylesheet" href="../kps.css" type="text/css">
</head>

<body>
<div class="content">
<h1>An Gramad&oacute;ir:<br>
How to Contribute</h1>

<hr>
<h2>Contributors</h2>
<ul>
<li>Sanlig Badral (Mongolian translation)
<li>Anneke Bart (Dutch translation)
<li>Paul Bowden (gramadoir-kw)
<li>Kevin Donnelly (gramadoir-cy, Welsh translation)
<li>Laurent Godard (OpenOffice interface)
<li>Martin Gregory (German translation, <a href="eagar.html">emacs interface</a>)
<li>Eugen Hoanca (Romanian translation)
<li>Roland Illig (German translation)
<li>Petri Jooste (gramadoir-af, Afrikaans translation)
<li>Andrej Kacian (Slovak translation)
<li><a href="http://www.cruinneog.com/">Diarmaid Mac Mathúna</a> (UI improvements, "Ceart" front end)
<li>Alastair McKinstry (Debian package)
<li>Michel Robitaille (French translation)
<li>Pablo Saratxaga (gramadoir-wa)
<li>Edi Werner (gramadoir-kw)
</ul>

<hr>
<h2>Reporting bugs</h2>
<p>Bug reports, support requests, and patches may be submitted via the
<a href="http://sourceforge.net/tracker/?group_id=114958">sourceforge tracker</a>.
</p>

<h2>Grammar checking other languages</h2>
<p>See the <a href="iompar.html">Languages</a> page for more information.</p>

<h2>Translating the user interface</h2>
<p>See our page at the 
<a href="http://www.iro.umontreal.ca/translation/registry.cgi?domain=gramadoir">GNU Translation Project</a> 
for more information.</p>

<hr>
<h2>Hacking the rule set</h2>
<p>
This section describes the syntax of the key 
input files used in constructing the grammar checker.  
I will make reference to the existing Irish language
version, but these descriptions apply equally to
any language by simply replacing "ga"
by the appropriate ISO-639 language code.
</p>

<p>
The easiest and most valuable way to contribute is by
helping add new rules to the checker.   Rules are contained in
three plain text files called <i>comhshuite-ga.in</i>, <i>aonchiall-ga.in</i>, 
and <i>rialacha-ga.in</i>.
Complicated "meta"-scripts convert these (more or less) human-readable
files into the Perl scripts which actually find and mark up the grammatical
errors.   
</p>

<p>
The file <i>comhshuite-ga.in</i> is the simplest of the three; each
line contains a multiword "set phrase" followed by the part of speech
tag that should be assigned to the given phrase.  
For instance, the phrase <i lang="ga">le haghaidh</i> appears, followed by
the tag "&lt;S&gt;", indicating that it is to be treated as a 
preposition.   Dealing with idiomatic expressions first improves
the performance of the part-of-speech tagger.  It also allows us to report
an error when a word which is almost always used in a set phrase is
mistakenly used in some other context.
</p>

<p>
The file <i>aonchiall-ga.in</i> contains rules for disambiguating 
parts of speech; for instance, the word <i>an</i> in Irish can either be
the definite article or an interrogative particle.   You will find
a sequence of rules in <i>aonchiall-ga.in</i> which indicate, for instance,
that if <i>an</i> is followed by a verb, preposition, or pronoun,
we expect it to be
an interrogative (and in most other cases it is the article). 
This kind of disambiguation is obviously a necessary preliminary step 
before one
can try to apply grammatical rules depending on part of speech.
</p>

<p>
The file <i>rialacha-ga.in</i> contains the grammatical rules proper,
and lists any exceptions to these rules.
The sections which follow describe the structure of all three files
in sufficient detail that (I hope) you will be able to write
and contribute your own rules for inclusion in later releases.
Alternatively, if you provide me with a brief description 
(in plain English or Irish) of
a rule you think is missing from the database, I will try and
construct the appropriate entry.
</p>

<hr>
<h2>Common structure of the *.in files</h2>
<p>
The structure of all three input files is essentially the same.
I've included a <i>flex/bison</i> parser in the distribution 
that can be used for error-checking these files during development
(see the "poncin" target in the Makefile).   Also, those who might prefer
a formal (BNF-like) grammar can look at the files <i>ponc.in.l</i>
and <i>ponc.in.y</i>.
</p>

<p>Lines beginning with a '#' or lines containing only whitespace are ignored.
All other lines contain "rules", which are structured as follows:</p>

<pre>
phrase:action
</pre>

<p>
A phrase is a simplified description of the regular expression you want 
to match in the marked up text stream.   The phrase syntax is the same for all
three files: a sequence of words separated by single spaces.
A word can either be an explicit regular expression
(e.g. "[Aa]ch" to match upper or lowercase "ach") or one
of a collection of macros defined in the file <i>macra-ga.meta.pl</i>
(e.g. "LENITEDDFST" expands to the regular expression
"[DdFfSsTt]h[^&lt;]*").  In addition, a word can be provided with
a grammatical tag when there is a danger of ambiguity.
For instance
"&lt;T&gt;[Aa]n&lt;/T&gt;"
refers specifically to the word "an" as the definite article and 
not, say, as an interrogative particle.  It is a good idea to
include these tags even for unambiguous words, in case the database
changes in the future (it is also faster this way).
The tag syntax
"&lt;[^S]&gt;do&lt;/[^S]&gt;"
is permitted as well; this will match instances of the word "do"
which are <em>not</em> prepositions.
Complicated regular expressions should be defined as 
macros in <i>macra-xx.meta.pl</i>; simple expressions
such as optional substrings or alternation are fine:
<pre>
(bh)?fh?ás
</pre>
In such cases, you should avoid using "non-capturing parentheses"
and plain (capturing) parentheses as above; the conversion scripts 
will treat these correctly when generating the 
final Perl code.
</p>

<p>
Because the syntax of the "action" differs among the three
files, we will discuss them one by one.   In the sections below
you will also find advice for what kinds of rules you might like
to include, ways of optimizing your rule set, etc.
</p>

<h2>Chunking: <i>comhshuite-ga.in</i></h2>
Since this filter is applied before any disambiguation occurs,
the phrase portion should consist of the word to be lumped
together with no additional markup.
The "action" portion contains a single (opening) part of speech tag
like 
"&lt;S&gt;"
which will be used to mark up all appearances of the phrase in the
input text.

<h2>Disambiguation: <i>aonchiall-ga.in</i></h2>
The phrase portion of a rule in <i>aonchiall-ga.in</i>
is required to contain a single word marked up with
"&lt;B&gt;&lt;/B&gt;".  Naturally, this is the word to disambiguate
and the phrase is the context in which the disambiguation is to occur.
Like <i>comhshuite-ga.in</i>, the "action" portion consists of a single
part of speech tag, representing the disambiguated part of speech
when the given phrase is matched.

<h2>Grammar checking: <i>rialacha-ga.in</i></h2>
<p>
The phrase portion of a rule in <i>rialacha-ga.in</i>
is converted to a regular expression which matches a grammatical error.
The action portion consists simply of a macro which expands
to the error message you want to be printed when the rule
applies.   As they belong to the user interface, these macros
are defined in <i>gr.in</i>.  The most common one is
"SEIMHIU" which expands to 
<i lang="ga">"S&eacute;imhi&uacute; ar iarraidh"</i>
("Missing lenition").
Certain macros can also take an parameter inside curly braces: 
the action "BACHOIR{ina}"
expands to
<i lang="ga">"Ba chóir duit /ina/ a úsáid anseo"</i>
("You ought to use /ina/ here") with the parameter inserted between the 
slashes.
</p>

<h2>Exceptions: <i>rialacha-ga.in</i></h2>
<p>
In earlier versions, the exceptions were kept in a separate input
file called <i>eisceacht-ga.in</i>.  We now find it more convenient
to store the exceptions together with the rules to which they
apply in the file <i>rialacha-ga.in</i>.
Following each rule, one has the option of including a block
of patterns representing exceptions to the rule that are
actually grammatical and should not be reported as errors.
For instance, the preposition <i lang="ga">sa</i> causes
lenition in general, but not in the phrase <i lang="ga">sa méid</i>;
this phrase is therefore included in <i>rialacha-ga.in</i>
with the action portion of the rule set to "OK".
</p>

<hr>
<em>© Cóipcheart/Copyright 2003-2005 Kevin P. Scannell</em><br><br>
</ul>
</div>
<div class="navigation">
<a href = "index.html">Home</a><br>
<a href = "sios.html">Download</a><br>
Contributing<br>
<a href = "iompar.html">Languages</a><br>
<a href = "stair.html">History</a><br>
<a href = "sampla.html">Sampler</a><br>
<a href = "bugs.html">Bugs</a><br>
<a href = "foirm.html">Web Interface</a><br>
<a href = "eagar.html">Editors</a><br>
<a href = "/nlp.html">Projects</a><br>
<p class="centered">
<a href="gram-OOo.png"><img class="linked-image" src="thumbs/gram-OOo.png" alt="OpenOffice screenshot" height="93" width="140"></a>
</p>
</div>
</body>
</html>
