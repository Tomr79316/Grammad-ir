--- Makefile	2005-03-02 22:19:41.115544560 -0600
+++ Makefile.ok	2005-03-02 22:19:33.861647320 -0600
@@ -60,8 +60,16 @@
 
 Makefile : Makefile.in config.status
 	./config.status
+	patch < Makefile.patch
 	chmod 444 Makefile
 
+Makefile.patch : FORCE
+	rm -f Makefile.patch
+	mv -f Makefile Makefile.ok
+	./configure
+	- diff -u Makefile Makefile.ok > Makefile.patch
+	mv -f Makefile.ok Makefile
+
 config.status: configure
 	./config.status --recheck
 
@@ -81,4 +89,190 @@
 semiclean :
 	rm -f y.tab.* $(LEX_OUTPUT_ROOT).* aonchiall.y rialacha.y
 
+###############################################################################
+#                    REMAINDER IS FOR MAINTAINER ONLY                         #
+###############################################################################
+
+webhome = $(HOME)/public_html/$(PACKAGE_NAME)
+
+installhtml : bugs.html sampla.html FORCE
+	$(INSTALL_DATA) bugs.html $(webhome)
+	$(INSTALL_DATA) cuidiu.html $(webhome)
+	$(INSTALL_DATA) eagar.html $(webhome)
+	$(INSTALL_DATA) foirm.html $(webhome)
+	$(INSTALL_DATA) form.html $(webhome)
+	$(INSTALL_DATA) index.html $(webhome)
+	$(INSTALL_DATA) sios.html $(webhome)
+	$(INSTALL_DATA) stair.html $(webhome)
+	$(INSTALL_DATA) sampla.html $(webhome)
+	$(MAKE) manual
+
+installweb : FORCE
+	$(MAKE) installhtml
+	$(INSTALL_DATA) gramadoir.dtd $(webhome)/../dtds
+	$(INSTALL_DATA) gramadoir.lsm $(webhome)
+	$(INSTALL_DATA) gramadoir.vim $(webhome)
+	$(INSTALL_DATA) gramadoir.el $(webhome)
+	$(INSTALL_DATA) OOo/gramadoir.sxw $(webhome)
+
+installcgi : FORCE
+	cp -f gr.cgi /home/httpd/cgi-bin
+	chmod 755 /home/httpd/cgi-bin/gr.cgi
+
+sampla.html : FORCE
+	(cd ga; $(MAKE) triail.html)
+	sed '/gram-ga\.pl triail/r ga/triail.html' samptemplate.html > sampla.html
+
+bugs.html : FORCE
+	(cd ga; $(MAKE) bugs.html)
+	sed '/scannell at slu dot edu/r ga/bugs.html' bugstemplate.html > bugs.html
+
+maintainer-clean :
+	$(MAKE) distclean
+	rm -f ChangeLog configure sampla.html bugs.html
+
+ChangeLog : FORCE
+	cvs2cl --FSF
+
+dist : FORCE
+	$(MAKE) ChangeLog
+	$(LN_S) gr ../$(TARBALL)
+	tar cvhf $(TARBALL).tar -C .. $(TARBALL)/ABOUT-NLS
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/aonchiall.meta.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/cabhair.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/ChangeLog
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/comhshuite.meta.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/config.guess
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/config.rpath
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/config.sub
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/configure
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/configure.ac
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/COPYING
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/count.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/gettext.h
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/gin.meta.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/gramadoir.dtd
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/gramadoir.el
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/Gramadoir.pm.in
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/gramadoir.vim
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/gramdev.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/gram.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/install-sh
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/Languages-en_us.pm
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/Languages.pm
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/lexbuild
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/Lingua-XX-Gramadoir.t
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/Makefile.in
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/Makefile.PL.in
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/Makefile-xx.in
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/MANIFEST
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/MANIFEST.SKIP
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/messages.txt
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/po2perl.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/ponc.in.l
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/ponc.in.y
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/README
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/README.perl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/README-xx
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/rialacha.meta.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/OOo/groo.pl
+	tar rvhf $(TARBALL).tar -C .. $(TARBALL)/OOo/gramadoir.sxw
+	cd po && $(MAKE) dist
+	gzip $(TARBALL).tar
+	chmod 444 $(TARBALL).tar.gz
+	rm -f ../$(TARBALL)
+
+CVSDIR=${HOME}/seal/gramadoir
+sync : FORCE
+	cp -f ABOUT-NLS $(CVSDIR)/engine
+	cp -f aonchiall.meta.pl $(CVSDIR)/engine
+	cp -f cabhair.pl $(CVSDIR)/engine
+	cp -f ChangeLog $(CVSDIR)/engine
+	cp -f comhshuite.meta.pl $(CVSDIR)/engine
+	cp -f config.guess $(CVSDIR)/engine
+	cp -f config.rpath $(CVSDIR)/engine
+	cp -f config.sub $(CVSDIR)/engine
+	cp -f configure $(CVSDIR)/engine
+	cp -f configure.ac $(CVSDIR)/engine
+	cp -f COPYING $(CVSDIR)/engine
+	cp -f count.pl $(CVSDIR)/engine
+	cp -f gettext.h $(CVSDIR)/engine
+	cp -f gin.meta.pl $(CVSDIR)/engine
+	cp -f gramadoir.dtd $(CVSDIR)/engine
+	cp -f gramadoir.el $(CVSDIR)/engine
+	cp -f Gramadoir.pm.in $(CVSDIR)/engine
+	cp -f gramadoir.vim $(CVSDIR)/engine
+	cp -f gramdev.pl $(CVSDIR)/engine
+	cp -f gram.pl $(CVSDIR)/engine
+	cp -f install-sh $(CVSDIR)/engine
+	cp -f Languages-en_us.pm $(CVSDIR)/engine
+	cp -f Languages.pm $(CVSDIR)/engine
+	cp -f lexbuild $(CVSDIR)/engine
+	cp -f Lingua-XX-Gramadoir.t $(CVSDIR)/engine
+	cp -f Makefile.in $(CVSDIR)/engine
+	cp -f Makefile.PL.in $(CVSDIR)/engine
+	cp -f Makefile-xx.in $(CVSDIR)/engine
+	cp -f MANIFEST $(CVSDIR)/engine
+	cp -f MANIFEST.SKIP $(CVSDIR)/engine
+	cp -f messages.txt $(CVSDIR)/engine
+	cp -f po2perl.pl $(CVSDIR)/engine
+	cp -f ponc.in.l $(CVSDIR)/engine
+	cp -f ponc.in.y $(CVSDIR)/engine
+	cp -f README $(CVSDIR)/engine
+	cp -f README.perl $(CVSDIR)/engine
+	cp -f README-xx $(CVSDIR)/engine
+	cp -f rialacha.meta.pl $(CVSDIR)/engine
+	cp -f OOo/groo.pl $(CVSDIR)/engine/OOo
+	cp -f OOo/gramadoir.sxw $(CVSDIR)/engine/OOo
+	cp -f po/af.po $(CVSDIR)/engine/po
+	cp -f po/boldquot.sed $(CVSDIR)/engine/po
+	cp -f po/cy.po $(CVSDIR)/engine/po
+	cp -f po/de.po $(CVSDIR)/engine/po
+	cp -f po/en@boldquot.header $(CVSDIR)/engine/po
+	cp -f po/en@quot.header $(CVSDIR)/engine/po
+	cp -f po/fr.po $(CVSDIR)/engine/po
+	cp -f po/ga.po $(CVSDIR)/engine/po
+	cp -f po/gramadoir.pot $(CVSDIR)/engine/po
+	cp -f po/insert-header.sin $(CVSDIR)/engine/po
+	cp -f po/LINGUAS $(CVSDIR)/engine/po
+	cp -f po/Makefile.in.in $(CVSDIR)/engine/po
+	cp -f po/Makevars $(CVSDIR)/engine/po
+	cp -f po/mn.po $(CVSDIR)/engine/po
+	cp -f po/nl.po $(CVSDIR)/engine/po
+	cp -f po/POTFILES.in $(CVSDIR)/engine/po
+	cp -f po/quot.sed $(CVSDIR)/engine/po
+	cp -f po/remove-potcdate.sin $(CVSDIR)/engine/po
+	cp -f po/ro.po $(CVSDIR)/engine/po
+	cp -f po/Rules-quot $(CVSDIR)/engine/po
+	cp -f po/sk.po $(CVSDIR)/engine/po
+	cp -f po/vi.po $(CVSDIR)/engine/po
+	(cd $(CVSDIR)/engine; cvs commit -m "sync'd with borel repository" .)
+	cvs update engine
+	cp -f ga/3grams-ga.txt $(CVSDIR)/ga
+	cp -f ga/COPYING $(CVSDIR)/ga
+	cp -f ga/Changes $(CVSDIR)/ga
+	cp -f ga/README $(CVSDIR)/ga
+	cp -f ga/aonchiall-ga.in $(CVSDIR)/ga
+	cp -f ga/comhshuite-ga.in $(CVSDIR)/ga
+	cp -f ga/configure $(CVSDIR)/ga
+	cp -f ga/earraidi-ga.bs $(CVSDIR)/ga
+	cp -f ga/eile-ga.bs $(CVSDIR)/ga
+	cp -f ga/freq-ga.txt $(CVSDIR)/ga
+	cp -f ga/giorr-ga.pre $(CVSDIR)/ga
+	cp -f ga/giorr-ga.txt $(CVSDIR)/ga
+	cp -f ga/lexicon-ga.txt $(CVSDIR)/ga
+	cp -f ga/macra-ga.meta.pl $(CVSDIR)/ga
+	cp -f ga/morph-ga.txt $(CVSDIR)/ga
+	cp -f ga/nocombo-ga.txt $(CVSDIR)/ga
+	cp -f ga/pos-ga.txt $(CVSDIR)/ga
+	cp -f ga/rialacha-ga.in $(CVSDIR)/ga
+	cp -f ga/triail.xml $(CVSDIR)/ga
+	cp -f ga/unigram-ga.pre $(CVSDIR)/ga
+	cp -f ga/unigram-ga.txt $(CVSDIR)/ga
+	(cd $(CVSDIR)/ga; cvs commit -m "sync'd with borel repository" .)
+
+manual: FORCE
+	rm -f $(webhome)/manual/*.html
+	jw -f docbook -b html -o $(webhome)/manual manual.sgml
+
 FORCE :
